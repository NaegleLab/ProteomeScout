#!/usr/bin/python
from pathname import *
import cgi
import random
print "Content-Type: application/octet-stream\n"
form = cgi.FieldStorage()
expid = form.getvalue('expid',None)
filename = "%s/output%s%s.txt"%(motifScratch,expid,random.randint(0,10000000))


## avg runs?
average = form.getvalue("avg","off")

if average == "on":
   average = "1"
else:
   average = "0"

## make the file
import os
os.chdir(path+'subset/clusters/')

if expid !=None:
   command = """perl -I"%s" %scall_printMinDataDescForExpId.pl %s %s %s %s""" %(libPath,scriptPath,expid, filename, PERL_DB, average)
   #print command
   os.system(command)

   

# Actual File Content will go hear.
## should make sure this is the one that was just created, don't give old results
try:
	fo = open(filename, "rb")

	str = fo.read();
	fo.close()
	print str
except IOError:
       print "Error. Either there is no data loaded for this experiment or an error occurred in creating the data file to export. If you suspect you are getting this message in error, contact ptmscout_admin@mit.edu."


