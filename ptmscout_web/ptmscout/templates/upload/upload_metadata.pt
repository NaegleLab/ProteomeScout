<div metal:use-macro="layout">
    <div metal:fill-slot="header">
        <link rel="stylesheet" type="text/css" href="${request.static_url('ptmscout:static/css/forms.css')}" />
        
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js" ></script>
        <script type="text/javascript" src="${request.static_url('ptmscout:static/js/utils.js')}" ></script>
        <script type="text/javascript" src="${request.static_url('ptmscout:static/js/base64.js')}"></script>
        <script type="text/javascript" src="${request.static_url('ptmscout:static/js/upload.form.js')}"></script>
    </div>
    <div metal:fill-slot="content">
        <form action="" method="post">
            <div class="hidden" id="pubmed_query_url">${request.application_url}/webservice/pubmed/</div>
            <input type="hidden" value="true" name="submitted" />
            <div class="wideform">
                <div tal:condition="reason != None" class="errorbox">Error: ${reason}</div>
                <div class="formcategory">Experiment Information</div>
                <table>
                    <tr>    
                        <td class="fieldname">Experiment Name:</td>
                        <td ><input type="text" name="experiment_name" size="55"/></td>
                    </tr>
                    <tr>
                        <td class="fieldname">Published:</td>
                        <td>
                            <select id="pubselect" name="published">
                                <option value=""></option>
                                <option value="no"  tal:attributes="selected 'yes' if formfields['published'] == 'no' else default">No</option>
                                <option value="yes" tal:attributes="selected 'yes' if formfields['published'] == 'yes' else default">Yes</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="fieldname">URL:*</td>
                        <td><input type="text" name="URL" size="55" tal:attributes="value formfields['URL']"/></td>
                    </tr>
                    <tr>
                        <td class="fieldname">Description:</td>
                        <td><textarea name="description" rows="5" cols="42" tal:content="formfields['description']"></textarea></td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">PubMed ID:*</td>
                        <td>
                            <input type="text" name="pmid" size="13" maxlength="12" tal:attributes="value formfields['pmid']"/>
                            <input type="button" id="load_pubmed" value="Load Pubmed Citation" />
                            <span id="pmiderror" class="errortext" style="display:none"></span>
                        </td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">Authors:</td>
                        <td><input type="text" name="authors" size="55" tal:attributes="value formfields['authors']"/></td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">Author Contact E-mail:</td>
                        <td><input type="text" name="author_contact" size="55" tal:attributes="value formfields['author_contact']"/></td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">Journal:</td>
                        <td><input type="text" name="journal" size="55" tal:attributes="value formfields['journal']"/></td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">Publication Date:</td>
                        <td>
                            <select name="publication_month">
                                <option value=""></option>
                                <option tal:repeat="month ['none', 'january','february','march','april','may','june','july','august','september','october','november','december']" tal:attributes="value month; selected 'yes' if formfields['publication_month'] == month else default" tal:content="month.capitalize()"></option>
                            </select>
                            <input type="text" size="4" name="publication_year" maxlength="4" tal:attributes="value formfields['publication_year']"/>
                        </td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">Volume:</td>
                        <td ><input type="text" name="volume" tal:attributes="value formfields['volume']"/></td>
                    </tr>
                    <tr class="pubinfo">
                        <td class="fieldname">Pages:</td>
                        <td>
                            <input type="text" name="page_start" size="10" maxlength="10" tal:attributes="value formfields['page_start']"/> to
                            <input type="text" name="page_end" size="10" maxlength="10" tal:attributes="value formfields['page_end']"/>
                        </td>
                    </tr>
                </table>
                
                
                <div class="formcategory">Experiment Data</div>
                <table>
                    <tr>
                        <td class="fieldname">Contains mass-spec data with possibly ambiguous accessions:</td>
                        <td> 
                            <select name="ambiguous">
                                <option value=""></option>
                                <option value="no" tal:attributes="selected 'yes' if formfields['ambiguous']=='no' else default">No</option>
                                <option value="yes" tal:attributes="selected 'yes' if formfields['ambiguous']=='yes' else default">Yes</option>
                            </select> 
                        </td>
                    </tr>
                    <tr>
                        <td class="fieldname">Notes:*</td>
                        <td>
                            <textarea rows="5" cols="43" name="notes"></textarea>
                        </td>
                    </tr>
                </table>
                
                <div class="formagreement">
                    <input type="checkbox" name="terms_of_use" />
                    I have read and agree to the <a href="${request.application_url}/terms" target="_blank">terms of use</a> 
                </div>
                
                <div class="formsubmission"><input type="submit" value="Upload" /></div>
                <div class="clear"></div>               
                <div class="formfooter">* denotes an optional field, all other fields are required</div>
            </div>
        </form>
    </div>
</div>