<div metal:define-macro="dataset_explorer">
	<link rel="stylesheet" type="text/css" href="${request.static_url('ptmscout:static/css/dataset.explorer.css')}" />
	<link rel="stylesheet" type="text/css" href="${request.static_url('ptmscout:static/css/forms.css')}" />
		
	<script type="text/javascript" src="${request.static_url('ptmscout:static/js/export.svg.js')}"></script>
	<script type="text/javascript" src="${request.static_url('ptmscout:static/js/graph.js')}"></script>
	<script type="text/javascript" src="${request.static_url('ptmscout:static/js/protein_data.js')}"></script>
	<script type="text/javascript" src="${request.static_url('ptmscout:static/js/seqlogo.js')}"></script>
	<script type="text/javascript" src="${request.static_url('ptmscout:static/js/dataset.explorer.js')}"></script>

	
	<div id="subset-select">
	
		Use the search form below to perform the following tasks:
		<ul>
			<li>Explore a smaller portion of a large dataset based on a common feature</li>
			<li>Generate hypotheses based on enrichment between dynamics and annotations or annotations of different sources</li>
			<li>View enrichment in clustering imported from outside (e.g. Self organizing maps, kmeans etc.)</li>
		</ul>
	
		<div id="field-data" style="display:none;" tal:content="field_data"></div>

	    <div class="filter-set">
		    <form method="GET" action="${request.application_url}/experiments/${experiment.id}/export" target="_blank">
		    	<fieldset>
		    		<legend>Export Experiment for Analysis</legend>
		    		<div>
		    			<span class="condition-title">Annotate:</span>
		    			<select name="annotate">
		    				<option value="no">No</option>
		    				<option value="yes">Yes</option>
		    			</select>
		    		</div>
		    		<input type="Submit" id="export-experiment" value="Export Experiment" />
		    	</fieldset>
	    	</form>
	    	<form method="POST" action="${request.route_url('experiment_annotate', id=experiment.id)}" enctype="multipart/form-data" >
		    	<fieldset>
		    		<legend>Import Annotation File</legend>
	   				<input type="file" name="annotationfile" /> <br />
		        	<input type="Submit" id="upload-annotations" class="longtask" value="Import Annotations" />
		        </fieldset>
	        </form>
    		<fieldset>
    			<legend>View Clustering Results</legend>
    			<span class="condition-title">Cluster Set:</span> <select id="cluster-set"></select> <button id="show-clusters" class="longtask">Show All Clusters From Set</button>
    		</fieldset>
	    </div>

		<div class="filter-set">
			<fieldset>
				<legend>Open Saved Subsets</legend>
				<div> <span class="condition-title">Subset:</span> <select id="saved-subset-select"> <option/> </select> <button class="longtask" id="open-saved-subset">View Subset</button> </div>
			</fieldset>
			<fieldset id="filter-conditions">
				<legend>Subset Filter Conditions</legend>
				<div> <span class="condition-title">Background:</span> <select id="background-select"><option value="experiment">Entire Experiment</option></select></div>
			</fieldset>
			<button id="add-condition">Add Condition</button>
			<button id="remove-condition">Remove Condition</button>
			
		    <div class="formsubmission">
		        <button id="compute-subset" class="longtask">Compute Subset</button>
		        <button id="clear-form">Clear</button>
		    </div>
		    <div class="clear"></div>
		    
	    </div>
	    
		<div id="open-subsets">
			<ul></ul>
		</div>
	</div>
</div>
